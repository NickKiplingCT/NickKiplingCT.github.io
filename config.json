{"icon":"white","settings":{"router":{"mode":"intelligent","animation":"off"},"theme":"default","auth":false,"encryption":false},"name":"ArrowSupport","version":"1.0","pages":[{"start":true,"name":"Login","config":[],"content":[{"name":"static_1","type":"area","item-type":"static","content":[{"name":"imgArrowLogo","type":"media","item-type":"image","fileName":"Arrow_XL_trans.png","actions":[],"expressions":{}},{"name":"htmlLogin","type":"content","item-type":"html","content":"<h2>Support Portal</h2>\n<p>Please enter your access details.</p>","expressions":{}},{"name":"txtUsername","type":"question","item-type":"text","label":"Username","required":false,"multiline":false,"validators":[],"actions":[],"expressions":{},"message":"This is a required field","description":"","default":""},{"name":"pswPassword","type":"question","item-type":"password","label":"Password","required":false,"expressions":{},"description":""},{"name":"btnLogin","type":"control","item-type":"button","content":"Sign In","actions":[{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"UserLogin","params":{"userId":"{{Login.txtUsername}}","password":"{{Login.pswPassword}}"}},"actions":[{"event":"success","type":"call-api","data":{"name":"supportAPI","operation":"DeviceList","params":{}},"actions":[{"event":"success","type":"go-to-page","data":"DeviceList"},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"deviceRequestFailure"}}]},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"loginFailed"}}]}],"expressions":{},"left-icon":"fa-sign-in","theme":"default"}],"expressions":{}}]},{"name":"DeviceList","config":[{"name":"On-Load Event","type":"event","item-type":"onload","actions":[{"event":"onload","type":"call-function","data":{"name":"clearLoginDetails"}}]}],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_c930d4e3","type":"navigation","item-type":"title-bar","content":[{"name":"backBtn","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"Login"}],"expressions":{},"classes":"backBtn","right-icon":"fa-sign-out","theme":"default"},{"name":"titleText","type":"content","item-type":"title","content":"<h1>Connected Devices</h1>","expressions":{},"classes":"titleText"},{"name":"createUserBtn","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"CreateUser"}],"expressions":{"show":"data__.api.supportAPI.UserLogin.AddUsers"},"classes":"backBtn","theme":"default","left-icon":"fa-user-plus"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_1","type":"area","item-type":"scrollable","content":[{"name":"list_1","type":"content","item-type":"list","title":"List","edit":false,"search":false,"row":"<h3 class=\"deviceListHeading\">User: <strong>{{UserId}}</strong></h3>\n<div class=\"deviceListContainer\">\n  <p><span class=\"rowLabel\">Route Id:</span> <strong>{{RouteId}}</strong></p>\n  <p><span class=\"rowLabel\">Device Id:</span> <strong>{{DeviceId}}</strong></p>\n  <p><span class=\"rowLabel\">Last Connected:</span> <strong>{{LastConnected | date : 'medium'}}</strong></p>\n  <p><span class=\"rowLabel\">Pilot Device:</span> <strong>{{IsPilot ? \"Yes\" : \"No\"}}</strong></p>\n</div>","classes":"","content":[],"actions":[{"name":"call_function_1","event":"click","type":"call-function","data":{"name":"SelectDevice","params":{"deviceId":"{{$item.DeviceId}}"}}},{"event":"click","type":"call-function","data":{"name":"LoadDeviceDetails"}},{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"model":"data__.api.supportAPI.DeviceList","expressions":{}}],"expressions":{}}],"start":false},{"name":"SelectedDevice","config":[{"name":"On-Load Event","type":"event","item-type":"onload","actions":[{"event":"onload","type":"call-function","data":{"name":"LoadDeviceDetails"}}]}],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_7b62fb64","type":"navigation","item-type":"title-bar","content":[{"name":"item_7ee98347","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"DeviceList"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_f56c2085","type":"content","item-type":"title","content":"<h1>Summary</h1>","expressions":{},"classes":"titleText"},{"name":"item_9aab406c","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_2","type":"area","item-type":"scrollable","content":[{"name":"html_1","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">Connected to User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n    <p><span class=\"rowLabel\">Route Id:</span> <strong>{{'data__.selectedDevice.RouteId' | store}}</strong></p>\n    <p><span class=\"rowLabel\">Device Id:</span> <strong>{{'data__.selectedDevice.DeviceId' | store}}</strong></p>\n    <p><span class=\"rowLabel\">Last Connected:</span> <strong>{{'data__.selectedDevice.LastConnected' | store | date : 'medium'}}</strong></p>\n    <p><span class=\"rowLabel\">Pilot Device:</span> <strong>{{'data__.selectedDevice.IsPilot ? \"Yes\" : \"No\"' | store}}</strong></p>\n</div>\n\n<h2 class=\"greenHeading\">Available Actions</h2>","expressions":{}},{"name":"btnViewLogins","type":"control","item-type":"button","content":"View Logins","expressions":{},"actions":[{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"GetLoginEvents","params":{"deviceUserId":"{{data__.selectedDevice.UserId}}"}},"actions":[]},{"event":"click","type":"go-to-page","data":"LoginEvents"}],"classes":"actionBtn","theme":"default"},{"name":"btnViewRoute","type":"control","item-type":"button","content":"View Route Downloads","expressions":{},"actions":[{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"GetRouteEvents","params":{"deviceUserId":"{{data__.selectedDevice.UserId}}"}}},{"event":"click","type":"go-to-page","data":"RouteEvents"}],"classes":"actionBtn","theme":"default"},{"name":"btnViewData","type":"control","item-type":"button","content":"View Device Data","actions":[{"event":"click","type":"go-to-page","data":"RequestDeviceData"}],"expressions":{},"classes":"actionBtn","theme":"default"},{"name":"btnSendData","type":"control","item-type":"button","content":"Send Device Data","expressions":{},"classes":"actionBtn","theme":"default","actions":[{"name":"go_to_page_1","event":"click","type":"go-to-page","data":"SendData"}]},{"name":"btnResendMessage","type":"control","item-type":"button","content":"Resend Message","expressions":{},"classes":"actionBtn","actions":[{"event":"click","type":"go-to-page","data":"ResendMessage"}],"theme":"default"},{"name":"btnMarkPilot","type":"control","item-type":"button","content":"Mark User as Pilot User","expressions":{},"classes":"actionBtn","actions":[{"event":"click","type":"go-to-page","data":"MarkPilot"}],"theme":"default"},{"name":"btnRequestResponses","type":"control","item-type":"button","content":"View Request Responses","expressions":{},"actions":[{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"InstructionResponse","params":{"deviceId":"{{data__.selectedDevice.DeviceId}}","deviceUserId":"{{data__.selectedDevice.UserId}}"}}},{"event":"click","type":"go-to-page","data":"RequestResponses"}],"classes":"actionBtn","theme":"default"}],"expressions":{}}]},{"name":"LoginEvents","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_40fb91c7","type":"navigation","item-type":"title-bar","content":[{"name":"item_1f627037","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_4a44a017","type":"content","item-type":"title","content":"<h1>Login Events</h1>","expressions":{},"classes":"titleText"},{"name":"item_28505e6b","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_3","type":"area","item-type":"scrollable","content":[{"name":"html_2","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n    <p>Below displays a list of all the login events that have occurred so far today.</p>\n</div>"},{"name":"lstLoginEvents","type":"content","item-type":"list","title":"List","edit":false,"search":false,"row":"{{LoginTime | date : 'medium'}}","classes":"","expressions":{},"content":[],"actions":[],"model":"data__.api.supportAPI.GetLoginEvents"}],"expressions":{}}]},{"name":"RouteEvents","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_54424402","type":"navigation","item-type":"title-bar","content":[{"name":"item_dc0a5b01","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_9cf7152b","type":"content","item-type":"title","content":"<h1>Route Events</h1>","expressions":{},"classes":"titleText"},{"name":"item_05a9aa71","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_4","type":"area","item-type":"scrollable","content":[{"name":"html_3","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n    <p>Below displays a list of all the route confirm events that have occurred so far today.</p>\n</div>"},{"name":"lstRouteEvents","type":"content","item-type":"list","title":"List","edit":false,"search":false,"row":"{{ConfirmTime | date : 'medium'}}","classes":"","content":[],"actions":[],"model":"data__.api.supportAPI.GetRouteEvents","expressions":{}}],"expressions":{}}]},{"name":"RequestDeviceData","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_417bc70d","type":"navigation","item-type":"title-bar","content":[{"name":"item_27991081","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_68538a34","type":"content","item-type":"title","content":"<h1>Request Device Data</h1>","expressions":{},"classes":"titleText"},{"name":"item_b70bcebf","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_5","type":"area","item-type":"scrollable","content":[{"name":"html_4","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n    <p>Use the below form to request specific data from the connected device.</p>\n</div>"},{"name":"txtData","type":"question","item-type":"text","label":"Data Item","required":false,"multiline":false,"expressions":{},"actions":[],"validators":[],"description":"Name of the data item you wish to request","message":"This is a required field"},{"name":"button_20","type":"control","item-type":"button","content":"Request Data from Device","actions":[{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"Instruction","params":{"deviceId":"{{data__.selectedDevice.DeviceId}}","instructionType":"requestData","instructionValues":"{ \"dataItem\": \"{{RequestDeviceData.txtData}}\"}","deviceUserId":"{{data__.selectedDevice.UserId}}"}}},{"event":"click","type":"go-to-page","data":"SelectedDevice"},{"type":"if","data":{},"operations":[{"type":"value","content":"{{data__.api.supportAPI.Instruction}}"},{"type":"operator","content":"!="},{"type":"value","content":"null"}]},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"deviceRequestSuccess"}},{"type":"otherwise","data":{}},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"deviceRequestFailure"}},{"type":"end-if","data":{}}],"expressions":{},"theme":"default"}]}]},{"name":"RequestResponses","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_059139bd","type":"navigation","item-type":"title-bar","content":[{"name":"item_7ebe7986","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_fe72a26a","type":"content","item-type":"title","content":"<h1>Request Responses</h1>","expressions":{},"classes":"titleText"},{"name":"item_0b8c6ad7","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_6","type":"area","item-type":"scrollable","content":[{"name":"html_5","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n    <p>Request responses are listed below:</p>\n</div>"},{"name":"lstRouteResponses","type":"content","item-type":"list","title":"List","edit":false,"search":false,"row":"<p class=\"listButton\">Type: <strong>{{InstructionType}}</strong> Time: <strong>{{RequestedTime | date : 'medium'}}</strong></p>","classes":"","content":[],"model":"data__.api.supportAPI.InstructionResponse","actions":[{"name":"call_function_1","event":"click","type":"call-function","data":{"name":"setSelectedResponse","params":{"id":"{{$item.Id}}"}}},{"event":"click","type":"go-to-page","data":"ViewRequestResponse"}],"expressions":{}}]}]},{"name":"MarkPilot","config":[{"name":"On-Load Event","type":"event","item-type":"onload","actions":[{"event":"onload","type":"start-timer","data":{"name":"onLoadTimer"}}]}],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_346bdab4","type":"navigation","item-type":"title-bar","content":[{"name":"item_3fc3f3f5","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_e2d0987d","type":"content","item-type":"title","content":"<h1>Mark Pilot</h1>","expressions":{},"classes":"titleText"},{"name":"item_f21cd9fb","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_7","type":"area","item-type":"scrollable","content":[{"name":"html_7","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n    <p>Mark this user to receive pilot updates:</p>\n</div>"},{"name":"swtPilot","type":"question","item-type":"switch","required":false,"on-text":"Yes","off-text":"No","validators":[],"actions":[],"expressions":{}},{"name":"btnConfirmPilot","type":"control","item-type":"button","content":"Confirm","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"setPilotResult"}},{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"MarkPilot","params":{"pilotValue":"{{MarkPilot.swtPilot ? 1 : 0}}","deviceId":"{{data__.selectedDevice.DeviceId}}"}}},{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"theme":"default"}],"expressions":{}}]},{"name":"ViewRequestResponse","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_f0b52fea","type":"navigation","item-type":"title-bar","content":[{"name":"item_d4c557d4","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"RequestResponses"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_efa11557","type":"content","item-type":"title","content":"<h1>View Request Response</h1>","expressions":{},"classes":"titleText"},{"name":"item_374f63d1","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_8","type":"area","item-type":"scrollable","content":[{"name":"html_8","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n  <p>Response from: <strong>{{'data__.selectedResponse.InstructionType' | store}}</strong></p>\n  <p>Response time: <strong>{{'data__.selectedResponse.RequestedTime' | store | date : 'medium'}}</strong></p>\n</div>"},{"name":"btnCopy","type":"control","item-type":"button","content":"Copy","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"copyResponse"}},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"copySuccess"}}]},{"name":"btnEmail","type":"control","item-type":"button","content":"Email","expressions":{},"actions":[{"event":"click","type":"call-url","data":{"params":{"subject":"Data Request Response (Id: {{data__.selectedResponse.Id}})","body":"Response: {{data__.selectedResponse.InstructionValues}}"},"name":"supportUrl"}}]},{"name":"txtResponseValues","type":"question","item-type":"text","label":"Response Result","required":false,"multiline":true,"default":"","validators":[],"actions":[],"expressions":{"default":"data__.selectedResponse.InstructionValues"}}]}]},{"name":"ResendMessage","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_8d9a02ef","type":"navigation","item-type":"title-bar","content":[{"name":"item_c3a7bc90","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left"},{"name":"item_9bb30cca","type":"content","item-type":"title","content":"<h1>Resend Message</h1>","expressions":{},"classes":"titleText"},{"name":"item_e5a2fb20","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_9","type":"area","item-type":"scrollable","content":[{"name":"html_9","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n  <p>Use the below button to remotely request the device to retry sending any messages remaining within the outbox.</p>\n</div>","expressions":{}},{"name":"btnResendMessage","type":"control","item-type":"button","content":"Resend Message","actions":[{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"Instruction","params":{"deviceId":"{{data__.selectedDevice.DeviceId}}","instructionType":"resendMessages","instructionValues":"{}","deviceUserId":"{{data__.selectedDevice.UserId}}"}}},{"event":"click","type":"go-to-page","data":"SelectedDevice"},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"deviceRequestSuccess"}}],"expressions":{},"theme":"default"}],"expressions":{}}]},{"name":"CreateUser","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_d8d31b84","type":"navigation","item-type":"title-bar","content":[{"name":"item_265f7e64","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"DeviceList"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left","theme":"default"},{"name":"item_b1860e59","type":"content","item-type":"title","content":"<h1>Create User</h1>","expressions":{},"classes":"titleText"},{"name":"item_b115d8f8","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_10","type":"area","item-type":"scrollable","content":[{"name":"html_10","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">Create New Portal User</strong></h2>\n\n<div class=\"deviceListContainer\">\n  <p>Create a new support user below.</p>\n</div>"},{"name":"txtNewUsername","type":"question","item-type":"text","label":"Username","required":false,"multiline":false,"expressions":{},"message":"This is a required field"},{"name":"pswNewPassword","type":"question","item-type":"password","label":"Password","required":false,"validators":[],"expressions":{},"message":"This is a required field"},{"name":"pswConfirm","type":"question","item-type":"password","label":"Confirm Password","required":false,"expressions":{},"message":"This is a required field"},{"name":"sltDepot","type":"question","item-type":"select","label":"Depot","required":false,"options":[{"label":"CT","value":"CT"},{"label":"Wigan","value":"Wigan"},{"label":"London","value":"London"}],"message":"This is a required field","validators":[],"actions":[],"expressions":{}},{"name":"swtCreateUsers","type":"question","item-type":"switch","label":"Create Users","required":false,"on-text":"Yes","off-text":"No","expressions":{}},{"name":"btnCreate","type":"control","item-type":"button","content":"Create User","theme":"default","actions":[{"event":"click","type":"call-api","data":{"name":"supportAPI","operation":"CreateUser","params":{"username":"{{CreateUser.txtNewUsername}}","password":"{{CreateUser.pswNewPassword}}","depot":"{{CreateUser.sltDepot.value}}","createUsers":"{{CreateUser.swtCreateUsers}}"}},"actions":[{"event":"success","type":"go-to-page","data":"DeviceList"},{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"createUserSuccess"}},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"createUserFailed"}}]}],"expressions":{}}],"expressions":{}}]},{"name":"SendData","config":[],"content":[{"name":"titleBar","type":"area","item-type":"row","content":[{"name":"item_fd9e481b","type":"navigation","item-type":"title-bar","content":[{"name":"item_a3608716","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":"SelectedDevice"}],"expressions":{},"classes":"backBtn","right-icon":"fa-arrow-circle-o-left","theme":"default"},{"name":"item_3c66fcfe","type":"content","item-type":"title","content":"<h1>Summary</h1>","expressions":{},"classes":"titleText"},{"name":"item_39c1dc88","type":"navigation","item-type":"nav-button","content":"","extends":{"type":"control","item-type":"button"},"actions":[{"event":"click","type":"go-to-page","data":""}],"expressions":{},"classes":"backBtn"}],"extends":{"type":"area","item-type":"row"},"expressions":{}}],"expressions":{}},{"name":"scrollable_11","type":"area","item-type":"scrollable","content":[{"name":"html_11","type":"content","item-type":"html","content":"<h2 class=\"greenHeading\">User: <strong>{{'data__.selectedDevice.UserId' | store}}</strong></h2>\n\n<div class=\"deviceListContainer\">\n    <p>Use the below form to send specific data to the connected device.</p>\n</div>"},{"name":"txtKey","type":"question","item-type":"text","label":"Key","required":false,"multiline":false,"validators":[],"actions":[],"expressions":{}},{"name":"txtValue","type":"question","item-type":"text","label":"Value","required":false,"multiline":true,"validators":[],"actions":[],"expressions":{}},{"name":"btnSendData","type":"control","item-type":"button","content":"Send Data","theme":"default","actions":[{"name":"call_api_1","event":"click","type":"call-api","data":{"name":"supportAPI","operation":"Instruction","params":{"instructionType":"setData","deviceId":"{{data__.selectedDevice.DeviceId}}","deviceUserId":"{{data__.selectedDevice.UserId}}","instructionValues":"{ \"dataItem\": \"{{SendData.txtKey}}\", \"dataValue\": \"{{SendData.txtValue}}\"}"}},"actions":[{"name":"go_to_page_1","event":"success","type":"go-to-page","data":"SelectedDevice"},{"name":"show_notification_1","event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"setDataSuccess"}},{"name":"show_notification_2","event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"setDataFail"}}]}],"expressions":{}}],"expressions":{}}]}],"config":[{"name":"theme_1","type":"style","item-type":"theme","content":".pageContainer,\n#Login,\n#Login div section,\n.flexbox-container .navbar-default.row-item:last-child,\n.flexbox-container .navbar-default.row-item:last-child .btn {\n\tbackground-color: rgb(114,46,165);\n\tborder: none;\n\tcolor: white;\n}\n\n.scrollable-item {\n\tbackground-color: #ddd;\n}\n\nimage-viewer[name=\"imgArrowLogo\"] div img {\n\tdisplay: block;\n\tpadding: 40px 0;\n    height: 240px;\n\tmargin: auto auto;\n}\n\n#htmlLogin {\n\ttext-align: center;\n}\n\n#htmlLogin div div p {\n\tcolor: #ddd;\n}\n\n#Login .control-label {\n\tcolor: white !important;\n}\n\ndiv#txtUsername {\n\tmargin-top: 60px !important;\n}\n\ndiv#txtUsername,\ndiv#pswPassword {\n\twidth: 70%;\n\tmargin: 20px auto;\n}\n\ninput#txtUsername,\ninput#pswPassword {\n\tbackground-color: rgb(114,46,165);\n    border: none;\n    border-bottom: 1px solid white;\n    color: white;\n}\n\na#btnLogin {\n\twidth: 65%;\n    border-radius: 6px;\n    color: rgb(114,46,165);\n    margin-top: 30px;\n}\n\n\nsection#titleBar section {   \n\tdisplay: flex;\n    flex-basis: 100%;\n    justify-content: space-between;\n    flex-direction: row;\n}\n\n#titleBar section md-title {\n\tflex-basis: 60%;\n    text-align: center;\n}\n\n#titleBar section div.md-button-container {\n\twidth: 10%;\n}\n\n#titleBar section div.md-button-container a {\n\tbackground-color: rgb(114,46,165);\n\tline-height: 58px;\n    padding: 0px 13pt 0 9pt;\n    border: none;\n    flex-basis: 10%;\n    font-size: 30px !important;\n}\n\n#titleBar .btn .fa {\n    font-size: 30px !important;\n}\n\n\n#DeviceList {\n\tbackground-color: #ddd;\n}\n\n.scrollable {\n\toverflow-y: hidden !important;\n}\n\n\nul {\n\tlist-style: none;\n\tpadding: 0;\n}\n\n.md-list ul li p {\n\tmargin-bottom: 0;\n}\n\n.deviceListHeading {\n\tbackground-color: rgb(201,221,3);\n    padding: 8px 15px;\n    font-size: 14px;\n    margin: 0;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.deviceListContainer {\n\tpadding: 8px 15px;\n    background-color: white;\n    font-size: 14px;\n    margin-bottom: 20px;\n}\n\n#DeviceList .deviceListHeading,\n#DeviceList .deviceListContainer {\n\tcursor: pointer;\n}\n\n.md-list ul li div.deviceListContainer p {\n\tmargin-bottom: 10px;\n}\n\n.rowLabel {\n\twidth: 115px;\n    display: inline-block;\n}\n\n\n.greenHeading {\n\tbackground-color: rgb(201,221,3);\n\tpadding: 8px 15px;\n\tfont-size: 14px;\n\tmargin: 0;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n#SelectedDevice .content-block,\n#LoginEvents .content-block,\n#RouteEvents .content-block,\n#RequestDeviceData .content-block,\n#RequestResponses .content-block,\n#MarkPilot .content-block,\n#ViewRequestResponse .content-block,\n#ResendMessage .content-block,\n#CreateUser .content-block,\n#SendData .content-block {\n\tmargin: 0;\n}\n\n#SelectedDevice .scrollable-item .md-button-container,\n#RequestDeviceData .scrollable-item .md-button-container,\n#MarkPilot .scrollable-item .md-button-container,\n#ViewRequestResponse .scrollable-item .md-button-container,\n#ResendMessage .scrollable-item .md-button-container,\n#CreateUser .scrollable-item .md-button-container,\n#SendData .scrollable-item .md-button-container {\n\tbackground-color: white;\n    margin: 0;\n    padding: 5px 0;\n}\n\n#SelectedDevice .md-button-container a,\n#RequestDeviceData .md-button-container a,\n#MarkPilot .md-button-container a,\n#ViewRequestResponse .md-button-container a,\n#ResendMessage .md-button-container a,\n#CreateUser .md-button-container a,\n#SendData .md-button-container a {\n\tbackground-color: rgb(114,46,165);\n    color: white;\n    border: none;\n    width: 95%;\n    font-size: 18px;\n    border-radius: 5px;\n}\n\n#LoginEvents .deviceListContainer,\n#RouteEvents .deviceListContainer,\n#RequestDeviceData .deviceListContainer,\n#RequestResponses .deviceListContainer,\n#MarkPilot .deviceListContainer,\n#ViewRequestResponse .deviceListContainer,\n#ResendMessage .deviceListContainer,\n#CreateUser .deviceListContainer,\n#SendData .deviceListContainer {\n\tmargin-bottom: 0;\n}\n\n#LoginEvents ul li,\n#RouteEvents ul li,\n#RequestResponses ul li,\n#CreateUser ul li,\n#SendData ul li {\n\tbackground-color: white;\n    padding: 8px 15px;\n    border-bottom: 1px solid #ddd;\n}\n\n#lstLoginEvents .scrollable,\n#lstRouteEvents .scrollable,\n#lstRouteResponses .scrollable {\n\tmargin-top: 0;\n}\n\n#RequestDeviceData md-question label,\n#RequestDeviceData md-question p,\n#MarkPilot md-question div,\n#CreateUser md-question label,\n#CreateUser md-question p,\n#SendData md-question label,\n#SendData md-question p {\n\twidth: 100%;\n    background-color: white;\n    padding: 0px 15px 5px;\n    margin: 0;\n}\n\n#RequestDeviceData md-question div,\n#CreateUser md-question div,\n#SendData md-question div {\n\tbackground-color: white;\n}\n\n#RequestDeviceData md-question > div > div,\n#CreateUser md-question > div > div,\n#SendData md-question > div > div {\n\twidth: 95%;\n    margin: auto;\n}\n\n.switch .switch-text .on {\n\tmargin-left: -50px !important;\n\tcolor: #A9A9A9;\n}\n\n.switch.checked {\n\tbackground: rgb(201,221,3) !important;\n\tborder-color: rgb(201,221,3) !important;\n}\n\n.spacer-top {\n\tmargin-top: 20px;\n}\n\n.breakWord {\n\tword-wrap: break-word; \n}\n\n\n#txtResponseValues div#txtResponseValues {\n\tbackground-color: white;\n\tpadding: 8px 15px;\n\n}\n\n#txtResponseValues.has-success label {\n\tcolor: black;\n\tfont-weight: normal;\n}\n\n#txtResponseValues.has-success textarea {\n\tborder-color: #ddd;\n\theight: 400px;\n}\n\np.listButton {\n\tpadding: 8px;\n    background-color: rgb(114,46,165);\n    color: white;\n    border-radius: 5px;\n    cursor: pointer;\n}"},{"name":"supportAPI","type":"integration","item-type":"api","headers":{},"params":[],"operations":[{"name":"DeviceList","method":"GET","path":"connecteddevices","summary":"Gets connected devices","params":[{"name":"apiKey","type":"string","description":"Api key for authorisation","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.ApiKey}}"},{"name":"userId","type":"string","description":"UserId","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.UserId}}"}],"responses":[]},{"name":"SendTestMessage","method":"POST","path":"sendmessagetest","summary":"Sends a test message","params":[{"name":"channel","type":"string","description":"Message channel","in":"body","required":true}],"responses":[]},{"name":"GetLoginEvents","method":"GET","path":"loginEvents","summary":"Gets the login events for selected user","params":[{"name":"apiKey","type":"string","description":"Api key for authorisation","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.ApiKey}}"},{"name":"userId","type":"string","description":"UserId","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.UserId}}"},{"name":"deviceUserId","type":"string","description":"UserId from device","in":"header","required":true,"default":"0"}],"responses":[]},{"name":"GetRouteEvents","method":"GET","path":"routeEvents","summary":"Gets all route events for current user","params":[{"name":"apiKey","type":"string","description":"Api key for authorisation","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.ApiKey}}"},{"name":"userId","type":"string","description":"UserId","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.UserId}}"},{"name":"deviceUserId","type":"string","description":"User Id","in":"header","required":true,"default":"0"}],"responses":[]},{"name":"Instruction","method":"POST","path":"instruction","summary":"Send an instruction to the device","params":[{"name":"apiKey","type":"string","description":"Api key for authorisation","in":"body","required":true,"default":"{{data__.api.supportAPI.UserLogin.ApiKey}}"},{"name":"userId","type":"string","description":"UserId","in":"body","required":true,"default":"{{data__.api.supportAPI.UserLogin.UserId}}"},{"name":"deviceId","type":"string","description":"DeviceId","in":"body","required":true},{"name":"deviceUserId","type":"string","description":"UserId","in":"body","required":true},{"name":"instructionType","type":"string","description":"instructionType","in":"body","required":true},{"name":"instructionValues","type":"string","description":"instructionValues","in":"body","required":true}],"responses":[]},{"name":"InstructionResponse","method":"GET","path":"instructionResponse","summary":"Get instruction responses","params":[{"name":"apiKey","type":"string","description":"Api key for authorisation","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.ApiKey}}"},{"name":"userId","type":"string","description":"UserId","in":"header","required":true,"default":"{{data__.api.supportAPI.UserLogin.UserId}}"},{"name":"deviceId","type":"string","description":"DeviceId","in":"header","required":true},{"name":"deviceUserId","type":"string","description":"UserId","in":"header","required":true}],"responses":[]},{"name":"MarkPilot","method":"POST","path":"markPilot","summary":"Marks device as pilot","params":[{"name":"apiKey","type":"string","description":"Api key for authorisation","in":"body","required":true,"default":"{{data__.api.supportAPI.UserLogin.ApiKey}}"},{"name":"userId","type":"string","description":"UserId","in":"body","required":true,"default":"{{data__.api.supportAPI.UserLogin.UserId}}"},{"name":"deviceId","type":"string","description":"DeviceId","in":"body","required":true},{"name":"pilotValue","type":"string","description":"True or false","in":"body","required":true,"default":"0"}],"responses":[]},{"name":"UserLogin","method":"POST","path":"userLogin","summary":"User login","params":[{"name":"userId","type":"string","description":"UserId","in":"body","required":true},{"name":"password","type":"string","description":"Password","in":"body","required":true}],"responses":[]},{"name":"CreateUser","method":"POST","path":"createUser","summary":"Creates new user","params":[{"name":"apiKey","type":"string","description":"Api key for authorisation","in":"body","required":true,"default":"{{data__.api.supportAPI.UserLogin.ApiKey}}"},{"name":"userId","type":"string","description":"UserId","in":"body","required":true,"default":"{{data__.api.supportAPI.UserLogin.UserId}}"},{"name":"username","type":"string","description":"Username","in":"body","required":true},{"name":"password","type":"string","description":"password","in":"body","required":true},{"name":"depot","type":"string","description":"Depot","in":"body","required":true},{"name":"createUsers","description":"Create Users","type":"string","in":"body","required":true}],"responses":[]}],"url":"http://arrowxlsupportservicedev.azurewebsites.net/api/","definitions":{}},{"name":"SelectDevice","type":"script","item-type":"function","content":"\nconsole.log('Device ID: ', deviceId);\nlocalStorage.setItem('selectedDevice', deviceId);","params":[{"name":"deviceId","required":true}]},{"name":"LoadDeviceDetails","type":"script","item-type":"function","content":"var selectedDevice = localStorage.getItem('selectedDevice');\nvar devices = mdm.store.data__.api.supportAPI.DeviceList;\n\nif(devices.length > 0) {\n  \tfor(var i = 0; i < devices.length; i++) {\n\t\tif(devices[i].DeviceId == selectedDevice) {\n        \tmdm.store.data__.selectedDevice = devices[i];\n        }\n    }\n}","params":[]},{"name":"formatDates","type":"script","item-type":"function","content":"debugger;\n\nvar deviceList = mdm.store.data__.api.supportAPI.DeviceList;\n\nfor(var i = 0; i < deviceList.length; i++) {\n  var d = deviceList[i];\n  d.lastConnected = new Date(d.LastConnected).toLocaleString();\n}\n\nmdm.store.api.supportAPI.DeviceList = deviceList;"},{"name":"setPilotDefault","type":"script","item-type":"function","content":"mdm.store.MarkPilot.swtPilot = mdm.store.data__.selectedDevice.IsPilot"},{"name":"setPilotResult","type":"script","item-type":"function","content":"mdm.store.data__.selectedDevice.IsPilot = mdm.store.MarkPilot.swtPilot"},{"name":"setSelectedResponse","type":"script","item-type":"function","content":"var responses = mdm.store.data__.api.supportAPI.InstructionResponse;\n\nif(id == \"\") {\n  id = 20;\n}\n\nif(responses.length > 0) {\n  \tfor(var i = 0; i < responses.length; i++) {\n\t\tif(responses[i].Id == id) {\n        \tmdm.store.data__.selectedResponse = responses[i];\n            mdm.store.data__.selectedResponse.resultString = JSON.stringify(responses[i].InstructionValues);\n        }\n    }\n}","params":[{"name":"id","required":true,"description":"Response id"}]},{"name":"deviceRequestSuccess","type":"notification","item-type":"app-notification","options":{"autoDismiss":true,"closeButton":true},"style":"success","title":"Data Request Received","text":"Your data request has been received successfully."},{"name":"deviceRequestFailure","type":"notification","item-type":"app-notification","options":{"autoDismiss":true,"closeButton":true},"style":"error","title":"Device Request Failure","text":"Your request has failed. Please try again."},{"name":"push_event_1","type":"notification","item-type":"push-event","operations":[],"actions":[]},{"name":"function_9","type":"script","item-type":"function"},{"name":"device_notification_1","type":"notification","item-type":"device-notification","interactions":[]},{"name":"onLoadTimer","type":"script","item-type":"timer","timer-type":"delay","time":"2","actions":[{"event":"click","type":"call-function","data":{"name":"setPilotDefault"}}]},{"name":"copyResponse","type":"script","item-type":"function","content":"var textArea = document.getElementsByTagName('textarea')[0];\ntextArea.select();\n\ndocument.execCommand('copy');\n\ntextArea.selectionStart = textArea.selectionEnd;"},{"name":"copySuccess","type":"notification","item-type":"app-notification","options":{"autoDismiss":true,"closeButton":true},"style":"success","title":"Data Copied","text":"Data successfully copied."},{"name":"supportUrl","type":"integration","item-type":"url","params":{},"target":"_self","url":"mailto:nick.kipling@commontime.com"},{"name":"loginFailed","type":"notification","item-type":"app-notification","options":{},"style":"error","title":"Login Failed","text":"Login has failed. Please try again."},{"name":"deletePreviousLogin","type":"script","item-type":"function","content":"if(mdm.store.data__.api.supportAPI !== undefined) {\n\tif(mdm.store.data__.api.supportAPI.UserLogin !== undefined) {\n\t\tdelete mdm.store.data__.api.supportAPI.UserLogin;\n\t} \n}"},{"name":"createUserSuccess","type":"notification","item-type":"app-notification","options":{"autoDismiss":true,"closeButton":true},"style":"success","actions":[],"title":"Success","text":"Created"},{"name":"createUserFailed","type":"notification","item-type":"app-notification","options":{},"style":"error","title":"Failed","text":"Failed"},{"name":"clearLoginDetails","type":"script","item-type":"function","content":"mdm.store.Login.txtUsername = \"\";\nmdm.store.Login.pswPassword = \"\";"},{"name":"setDataSuccess","type":"notification","item-type":"app-notification","options":{"autoDismiss":true,"closeButton":true},"style":"success","title":"Send Data Success","text":"Your send data command has been sent successfully.","actions":[]},{"name":"setDataFail","type":"notification","item-type":"app-notification","options":{},"style":"error","title":"Send Data Failed","text":"Your send data command has failed."}],"components":[],"translation":{"default":"en_GB"}}